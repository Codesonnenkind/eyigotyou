<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EYIGOTYOU</title>
    <link rel="icon" type="image/jpeg" href="https://www.dropbox.com/scl/fi/n2ez50rho6xydpma93sq2/500.jpeg?rlkey=8omntfna9sqvagk8p6cs7gjwh&raw=1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --background-color: #0A0A0A;
            --primary-color: #FFFFFF;
            --secondary-color: #888888;
            
            --break-color: #22C55E; /* Green */
            --warning-color: #EF4444; /* Red for break warning */
        }

        html, body {
            height: 100%;
            margin: 0;
            background-color: var(--background-color);
            color: var(--secondary-color);
            font-family: 'Inter', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: auto; /* Allow scrolling for settings */
            padding: 20px;
            box-sizing: border-box;
        }

        .site-logo {
            position: fixed; /* Position relative to the whole window */
            top: 20px;
            right: 20px;
            width: 50px;
            height: auto;
            z-index: 100; /* Ensure it's on top of everything */
        }

        .module-container {
            background-color: transparent;
            border: none;
            padding: 5vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            position: relative;
            width: 90vw;
            max-width: 400px;
        }

        .timer-container {
            position: relative;
            width: 70vw;
            height: 70vw;
            max-width: 300px;
            max-height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .timer-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform: rotate(135deg); 
            transition: transform 0.5s ease-in-out;
        }
        
        .timer-svg.counter-clockwise {
            transform: rotate(135deg) scaleX(-1);
        }

        .timer-circle {
            fill: none;
            stroke-width: 4; 
        }
        
        #timer-track { stroke: var(--secondary-color); opacity: 0.1; }

        #timer-progress {
            stroke: var(--primary-color);
            stroke-linecap: round;
            transition: stroke 0.5s ease-in-out, stroke-dashoffset 0.2s linear;
        }
        
        #progress-dot {
            fill: var(--primary-color);
            transition: fill 0.5s ease-in-out;
            animation: pulsate 1.5s infinite alternate ease-in-out;
        }

        @keyframes pulsate {
            from { fill: transparent; }
            to { fill: var(--primary-color); }
        }
        
        #time-left {
            z-index: 1; 
            font-size: 12vw;
            font-weight: 700;
            letter-spacing: 0.1em;
            color: var(--primary-color);
        }
        
        #mode-display {
            z-index: 2;
            font-size: 1rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            color: var(--secondary-color);
            transition: color 0.5s ease-in-out;
            text-align: center;
        }
        
        .control-panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            max-width: 300px;
        }

        .control-group {
            display: flex;
            border: 2px solid var(--secondary-color);
        }
        
        .mode-btn, .control-btn, .setting-item {
            background-color: transparent;
            border: none;
            color: var(--secondary-color);
            padding: 12px;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            transition: all 0.2s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center; 
            gap: 10px;
        }
        
        .mode-btn, .control-btn {
            cursor: pointer;
        }
        
        /* Asymmetrical Sizing and Alignment */
        .mode-btn, .control-btn, .setting-item { flex-basis: 33.33%; }
        .mode-btn[data-mode="pomodoro"], #start-pause-btn, .setting-item.label { 
            flex-basis: 66.67%;
            justify-content: flex-start; /* Left-align the text in the larger box */
            padding-left: 20px; /* Add padding to the left */
        }

        .mode-btn:not(:last-child), .control-btn:not(:last-child), .setting-item:not(:last-child) {
             border-right: 2px solid var(--secondary-color);
        }

        .mode-btn.active {
            background-color: var(--secondary-color);
            color: var(--background-color);
        }
        
        .control-btn:hover, .mode-btn:not(:active):hover {
            color: var(--primary-color);
        }

        .settings-panel {
            display: none; /* Hidden by default */
            width: 100%;
            flex-direction: column;
            gap: 15px;
        }
        .settings-panel.active {
            display: flex;
        }
        
        .setting-item.label span {
            font-size: 0.7rem; /* Smaller unit label */
            font-weight: 400;
            opacity: 0.7;
            margin-left: 5px;
        }
        
        .settings-panel input {
            background-color: transparent;
            border: none; /* Removed border */
            color: var(--primary-color);
            padding: 0;
            width: 40px;
            text-align: center;
            font-family: inherit;
            font-size: 0.9rem;
            font-weight: 500;
        }
        /* Hide number input arrows */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none;
            margin: 0; 
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
        
        /* Media Queries for Responsiveness */
        @media (min-width: 600px) {
             #time-left {
                font-size: 3.2rem; /* Cap font size on larger screens */
            }
        }
        
    </style>
</head>
<body>
    
    <img src="https://www.dropbox.com/scl/fi/n2ez50rho6xydpma93sq2/500.jpeg?rlkey=8omntfna9sqvagk8p6cs7gjwh&raw=1" alt="Logo" class="site-logo">

    <div class="module-container">
        <!-- Timer Display (Visible in all modes) -->
        <div class="timer-container">
            <svg class="timer-svg" viewBox="0 0 100 100">
                <circle class="timer-circle" id="timer-track" cx="50" cy="50" r="45"></circle>
                <circle class="timer-circle" id="timer-progress" cx="50" cy="50" r="45"></circle>
                <circle id="progress-dot" cx="95" cy="50" r="2"></circle>
            </svg>
            <div id="time-left">25:00</div>
        </div>
        <div id="mode-display">Work</div>
        
        <div class="control-panel">
            <div class="control-group">
                <button class="mode-btn active" data-mode="pomodoro">Pomodoro</button>
                <button class="mode-btn" data-mode="sports">Sports</button>
            </div>
            
            <div id="pomodoro-settings" class="settings-panel active">
                <div class="control-group">
                    <div class="setting-item label">WORK <span>(MIN)</span></div>
                    <div class="setting-item"><input type="number" id="work-time" value="25" min="1"></div>
                </div>
                 <div class="control-group">
                    <div class="setting-item label">BREAK <span>(MIN)</span></div>
                    <div class="setting-item"><input type="number" id="break-time" value="5" min="1"></div>
                </div>
            </div>

            <div id="sports-settings" class="settings-panel">
                 <div class="control-group">
                    <div class="setting-item label">Workout <span>(SEC)</span></div>
                    <div class="setting-item"><input type="number" id="workout-time" value="45" min="0"></div>
                </div>
                <div class="control-group">
                    <div class="setting-item label">Rest <span>(SEC)</span></div>
                    <div class="setting-item"><input type="number" id="rest-time" value="15" min="0"></div>
                </div>
                <div class="control-group">
                    <div class="setting-item label">Rounds</div>
                    <div class="setting-item"><input type="number" id="rounds" value="8" min="1"></div>
                </div>
            </div>
            
            <div class="control-group">
                <button class="control-btn" id="start-pause-btn">Start</button>
                <button class="control-btn" id="reset-btn">Reset</button>
            </div>
        </div>
        
    </div>

    <script>
        // --- DOM Elements ---
        const timeLeftDisplay = document.getElementById('time-left');
        const startPauseBtn = document.getElementById('start-pause-btn');
        const resetBtn = document.getElementById('reset-btn');
        const progressCircle = document.getElementById('timer-progress');
        const modeDisplay = document.getElementById('mode-display');
        const timerSvg = document.querySelector('.timer-svg'); 
        const progressDot = document.getElementById('progress-dot');
        const modeBtns = document.querySelectorAll('.mode-btn');
        const settingsPanels = document.querySelectorAll('.settings-panel');

        // --- Global State ---
        let mainTimerId = null;
        let isPaused = true;
        let hasStarted = false; 
        let currentMode = 'pomodoro';
        let targetTime = null;

        // --- SVG Circle Calculations ---
        const radius = progressCircle.r.baseVal.value;
        const circumference = 2 * Math.PI * radius;
        progressCircle.style.strokeDasharray = circumference;

        // --- Generic Timer Logic ---
        function updateDisplay(timeLeft, totalDuration) {
            if (totalDuration <= 0) totalDuration = 1;
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timeLeftDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            let progress = (totalDuration - timeLeft) / totalDuration;

            if (currentMode === 'pomodoro' && pomodoroState.mode === 'break') {
                const breakProgress = (pomodoroState.breakSec - timeLeft) / pomodoroState.breakSec;
                if (breakProgress >= 0.9 && timeLeft > 0) {
                    progressCircle.style.stroke = 'var(--warning-color)';
                } else {
                    progressCircle.style.stroke = 'var(--break-color)';
                }
                progress = timeLeft / totalDuration; 
            } else if (currentMode === 'sports' && !sportsState.isWorkout) {
                const restProgress = (sportsState.restSec - timeLeft) / sportsState.restSec;
                if (restProgress >= 0.7 && timeLeft > 0) {
                    progressCircle.style.stroke = 'var(--warning-color)';
                } else {
                    progressCircle.style.stroke = 'var(--break-color)';
                }
            } else {
                progressCircle.style.stroke = 'var(--primary-color)';
            }

            const offset = circumference * (1 - progress);
            progressCircle.style.strokeDashoffset = offset;
        }


        function resetAllTimers() {
            clearInterval(mainTimerId);
            mainTimerId = null;
            targetTime = null;
            isPaused = true;
            hasStarted = false;
            startPauseBtn.textContent = 'Start';
            progressDot.style.display = 'block';
            if (currentMode === 'pomodoro') pomodoroReset();
            if (currentMode === 'sports') sportsReset();
        }

        // --- Mode Switching ---
        modeBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const mode = btn.dataset.mode;
                if (mode === currentMode) return;
                currentMode = mode;
                
                modeBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                settingsPanels.forEach(p => p.classList.remove('active'));
                document.getElementById(`${mode}-settings`).classList.add('active');
                
                resetAllTimers();
            });
        });

        // --- Pomodoro Mode ---
        let pomodoroState = {};

        function pomodoroReset() {
            pomodoroState = {
                workSec: parseInt(document.getElementById('work-time').value, 10) * 60,
                breakSec: parseInt(document.getElementById('break-time').value, 10) * 60,
                mode: 'work'
            };
            pomodoroState.timeLeft = pomodoroState.workSec;
            pomodoroState.totalDuration = pomodoroState.workSec;
            modeDisplay.textContent = 'Work';
            updateDisplay(pomodoroState.timeLeft, pomodoroState.totalDuration);
        }

        function pomodoroSwitch() {
            if (pomodoroState.mode === 'work') {
                pomodoroState.mode = 'break';
                pomodoroState.timeLeft = pomodoroState.breakSec;
                pomodoroState.totalDuration = pomodoroState.breakSec;
                modeDisplay.textContent = 'Break';
            } else {
                pomodoroState.mode = 'work';
                pomodoroState.timeLeft = pomodoroState.workSec;
                pomodoroState.totalDuration = pomodoroState.workSec;
                modeDisplay.textContent = 'Work';
            }
            targetTime = Date.now() + pomodoroState.timeLeft * 1000;
            updateDisplay(pomodoroState.timeLeft, pomodoroState.totalDuration);
        }

        function pomodoroTick() {
            let timeLeft = Math.round((targetTime - Date.now()) / 1000);
            if (timeLeft <= 0) {
                timeLeft = 0;
                pomodoroSwitch();
            } else { 
                pomodoroState.timeLeft = timeLeft;
                updateDisplay(timeLeft, pomodoroState.totalDuration);
            }
        }
        
        // --- Sports Mode ---
        let sportsState = {};
        function sportsReset() {
            sportsState = {
                workoutSec: parseInt(document.getElementById('workout-time').value, 10),
                restSec: parseInt(document.getElementById('rest-time').value, 10),
                totalRounds: parseInt(document.getElementById('rounds').value, 10),
                currentRound: 1,
                isWorkout: true,
            };
            sportsState.timeLeft = sportsState.workoutSec;
            sportsState.totalDuration = sportsState.workoutSec;
            modeDisplay.textContent = `Round ${sportsState.currentRound}`;
            updateDisplay(sportsState.timeLeft, sportsState.totalDuration);
        }

        function sportsSwitch() {
             if (sportsState.isWorkout) {
                sportsState.isWorkout = false;
                sportsState.timeLeft = sportsState.restSec;
                sportsState.totalDuration = sportsState.restSec;
                modeDisplay.textContent = 'Rest';
             } else {
                sportsState.currentRound++;
                if (sportsState.currentRound > sportsState.totalRounds) {
                    resetAllTimers();
                    return;
                }
                sportsState.isWorkout = true;
                sportsState.timeLeft = sportsState.workoutSec;
                sportsState.totalDuration = sportsState.workoutSec;
                modeDisplay.textContent = `Round ${sportsState.currentRound}`;
             }
             
             targetTime = Date.now() + sportsState.timeLeft * 1000;
             updateDisplay(sportsState.timeLeft, sportsState.totalDuration);
        }

        function sportsTick() {
             let timeLeft = Math.round((targetTime - Date.now()) / 1000);
             if (timeLeft <= 0) {
                timeLeft = 0;
                sportsSwitch();
             } else {
                sportsState.timeLeft = timeLeft;
                updateDisplay(timeLeft, sportsState.totalDuration);
             }
        }
        
        // --- Main Event Listeners ---
        function startTimer() {
            isPaused = false;
            hasStarted = true;
            startPauseBtn.textContent = 'Pause';
            progressDot.style.display = 'none';
            
            let currentLeft;
            if (currentMode === 'pomodoro') currentLeft = pomodoroState.timeLeft;
            if (currentMode === 'sports') currentLeft = sportsState.timeLeft;
            
            targetTime = Date.now() + currentLeft * 1000;

            if (currentMode === 'pomodoro') mainTimerId = setInterval(pomodoroTick, 1000);
            if (currentMode === 'sports') mainTimerId = setInterval(sportsTick, 1000);
        }

        function pauseTimer() {
             isPaused = true;
             startPauseBtn.textContent = 'Continue';
             progressDot.style.display = 'none';
             clearInterval(mainTimerId);
             mainTimerId = null;
             
             if(targetTime) {
                const timeLeftOnPause = Math.round((targetTime - Date.now()) / 1000);
                if (currentMode === 'pomodoro') pomodoroState.timeLeft = timeLeftOnPause > 0 ? timeLeftOnPause : 0;
                if (currentMode === 'sports') sportsState.timeLeft = timeLeftOnPause > 0 ? timeLeftOnPause : 0;
             }
             targetTime = null;
        }

        startPauseBtn.addEventListener('click', () => {
            if (isPaused) {
                if (!hasStarted) { 
                     if (currentMode === 'pomodoro') pomodoroReset();
                     if (currentMode === 'sports') sportsReset();
                }
                startTimer();
            } else {
                pauseTimer();
            }
        });

        resetBtn.addEventListener('click', resetAllTimers);

        // --- Initial Setup ---
        window.onload = () => {
            resetAllTimers();
        };

    </script>
</body>
</html>
